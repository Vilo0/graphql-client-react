{"version":3,"sources":["firebase.js","context/authContext.js","components/Nav.js","graphql/fragments.js","graphql/queries.js","components/Image.js","components/PostCard.js","pages/Home.js","components/UserCard.js","pages/Users.js","components/forms/AuthForm.js","pages/auth/Register.js","pages/auth/PasswordUpdate.js","pages/auth/PasswordForgot.js","graphql/mutations.js","components/forms/UserProfile.js","components/FileUpload.js","pages/auth/Profile.js","pages/auth/Login.js","pages/auth/CompleteRegistration.js","components/LoadingToRedirect.js","components/PrivateRoute.js","components/PublicRoute.js","components/modals/PostDelete.js","pages/post/Post.js","pages/SingleUser.js","components/modals/PostUpdate.js","components/modals/PostShow.js","pages/post/Posts.js","pages/post/SinglePost.js","App.js","index.js"],"names":["firebase","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","googleAuthProvider","GoogleAuthProvider","firebaseReducer","state","action","type","user","payload","initialState","AuthContext","createContext","AuthProvider","children","useReducer","dispatch","history","useHistory","useEffect","listen","location","console","log","pathname","unsubscribe","onAuthStateChanged","a","getIdTokenResult","idTokenResult","email","token","value","Provider","Nav","useContext","useState","search","setSearch","className","to","REACT_APP_BASE_URL","data-toogle","data-target","aria-controls","aria-expanded","aria-label","id","activeClassName","split","onClick","signOut","href","onSubmit","e","preventDefault","push","placeholder","onChange","target","name","USER_INFO","gql","POST_DATA","PROFILE","PUBLIC_PROFILE","ALL_USERS","GET_ALL_POST","POSTS_BY_USER","POST_SHOW","Image","image","handleImageRemove","f","src","url","alt","public_id","style","height","PostCard","post","onShow","onShowDelete","onShowUpdate","postModal","content","minHeight","postedBy","username","handleShow","handleUpdate","handleDelete","Home","useQuery","data","loading","useLazyQuery","fetchPosts","posts","allPosts","map","_id","JSON","stringify","UserCard","images","about","Users","allUsers","AuthForm","password","setEmail","setPassword","handleSubmit","showPasswordInput","hideEmailInput","disabled","required","Register","setLoading","config","handleCodeInApp","sendSignInLinkToEmail","result","toast","success","window","localStorage","setItem","PasswordUpdate","currentUser","updatePassword","then","catch","error","message","PasswordForgot","sendPasswordResetEmail","USER_UPDATE","USER_CREATE","POST_CREATE","POST_UPDATE","POST_DELETE","UserProfile","handleChange","FileUpload","setValues","values","singleUpload","axios","headers","authtoken","response","filteredImages","filter","item","hidden","accept","event","fileInput","files","Resizer","imageFileResizer","uri","Profile","useMemo","profile","omitDeep","useMutation","update","userUpdate","variables","input","Login","signInWithEmailAndPassword","signInWithPopup","CompleteRegistration","getItem","userCreate","signInWithEmailLink","emailVerified","removeItem","LoadingToRedirect","path","count","setCount","interval","setInterval","currentCount","clearInterval","PrivateRoute","rest","setUser","PublicRoute","PostUpdateModal","show","onClose","postDelete","setPostId","handleConfirmDelete","Modal","onHide","Header","closeButton","Title","Body","Footer","Button","variant","Post","setShow","setPostModal","limit","page","myData","cache","postCreate","postsByUser","readQuery","query","writeQuery","__typename","onError","err","graphqlQLError","rows","maxLength","PostDelete","SingleUser","params","useParams","publicProfile","postUpdate","dataModal","PostModalShow","Posts","emailUser","context","showDelete","setShowDelete","showUpdate","setShowUpdate","handleShowDelete","handleShowUpdate","setPage","setLimit","setResult","postId","postDeleted","useLocation","parseInt","pages","pageCount","PostUpdate","image_url","SinglePost","idPost","postShow","dataPost","htmlFor","App","client","ApolloClient","request","operation","setContext","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.63d56ed6.chunk.js","sourcesContent":["import * as firebase from \"firebase\";\n// firebase config\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_APIKEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\n  appId: process.env.REACT_APP_FIREBASE_APPID\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();  \n","import React, { useReducer, useEffect, createContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\n\n// reducer function\nconst firebaseReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGGED_IN_USER\":\n      return { ...state, user: action.payload };\n    default:\n      return state;\n  }\n};\n\n// state\nconst initialState = {\n  user: null,\n};\n\n// create context\nconst AuthContext = createContext();\n\n// context provider\nconst AuthProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(firebaseReducer, initialState);\n  let history = useHistory();\n\n  useEffect(() => {\n    history.listen((location) => {\n      console.log(`You changed the page to: ${location.pathname}`)\n    })\n  }, [history])\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: { email: user.email, token: idTokenResult.token },\n        });\n      } else {\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: null,\n        });\n      }\n    });\n    // cleanup\n    return () => unsubscribe();\n  }, []);\n\n  const value = { state, dispatch };\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport { AuthProvider, AuthContext };\n","import React, { useState, useContext, Fragment } from \"react\";\nimport { Link, NavLink, useHistory } from \"react-router-dom\";\nimport { auth } from \"firebase\";\nimport { AuthContext } from \"../context/authContext\";\n\nconst Nav = () => {\n  const { state, dispatch } = useContext(AuthContext);\n  const [search, setSearch] = useState(\"\");\n  let history = useHistory();\n\n  const { user } = state;\n  console.log(\"user\", user);\n\n  const logout = () => {\n    auth().signOut();\n    dispatch({\n      type: \"LOGGED_IN_USER\",\n      payload: null,\n    });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    console.log(\"valor\", search);\n    history.push({\n      pathname: '/posts',\n      state: { search }\n    });\n  }\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light \">\n      <Link className=\"navbar-brand\" to={`${process.env.REACT_APP_BASE_URL}/`}>\n        Navbar\n      </Link>\n      <button\n        className=\"navbar-toggler\"\n        type=\"button\"\n        data-toogle=\"collapse\"\n        data-target=\"#navbarSupportedContent\"\n        aria-controls=\"navbarSupportedContent\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span className=\"navbar-toggler-icon\"></span>\n      </button>\n\n      <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul className=\"navbar-nav mr-auto\">\n          <li className=\"nav-item\">\n            <NavLink className=\"nav-link\" to={`${process.env.PUBLIC_URL}/users`} activeClassName=\"active\">\n              Users\n            </NavLink>\n          </li>\n\n          <li className=\"nav-item\">\n            <NavLink className=\"nav-link\" to={`${process.env.PUBLIC_URL}/posts`} activeClassName=\"active\">\n              Posts\n            </NavLink>\n          </li>\n\n          {user && (\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to={`${process.env.PUBLIC_URL}/profile`} activeClassName=\"active\">\n                {user && user.email.split(\"@\")[0]}\n              </NavLink>\n            </li>\n          )}\n\n          {!user && (\n            <Fragment>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to={`${process.env.REACT_APP_BASE_URL}/login`}>\n                  Login\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to={`${process.env.REACT_APP_BASE_URL}/register`}>\n                  Register\n                </Link>\n              </li>\n            </Fragment>\n          )}\n          {user && (\n            <li className=\"nav-item\">\n              <a onClick={logout} href={`${process.env.REACT_APP_BASE_URL}/login`} className=\"nav-item nav-link\">\n                Logout\n              </a>\n            </li>\n          )}\n        </ul>\n        <form onSubmit={handleSearch} className=\"form-inline my-2 my-lg-0\">\n          <input\n            className=\"form-control mr-sm-2\"\n            type=\"search\"\n            placeholder=\"Search\"\n            aria-label=\"Search\"\n            onChange={(e) => setSearch(e.target.value)}\n            name=\"search\"\n          />\n          <button\n            className=\"btn btn-outline-success my-2 my-sm-0\"\n            type=\"submit\"\n          >\n            Search\n          </button>\n        </form>\n      </div>\n    </nav>\n  );\n};\n\nexport default Nav;\n","import { gql } from \"apollo-boost\";\n\nexport const USER_INFO = gql`\n  fragment userInfo on User {\n    _id\n    name\n    username\n    email\n    images {\n      url\n      public_id\n    }\n    about\n    createdAt\n    updatedAt\n  }\n`;\n\nexport const POST_DATA = gql`\n  fragment postData on Post {\n    _id\n    content\n    image {\n      url\n      public_id\n    }\n    postedBy {\n      _id\n      username\n      email\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\nimport { USER_INFO, POST_DATA } from \"./fragments\";\n\nexport const PROFILE = gql`\n  query {\n    profile {\n      ...userInfo\n    }\n  }\n  ${USER_INFO}\n`;\n\nexport const PUBLIC_PROFILE = gql`\n  query publicProfile($username: String!) {\n    publicProfile(username: $username) {\n      _id\n      username\n      name\n      email\n      images {\n        url\n        public_id\n      }\n      about\n    }\n  }\n`;\n\nexport const ALL_USERS = gql`\n  query {\n    allUsers {\n      ...userInfo\n    }\n  }\n  ${USER_INFO}\n`;\n\nexport const GET_ALL_POST = gql`\n  query allPosts($limit: Int, $page: Int, $search: String){\n    allPosts(limit: $limit, page: $page, search: $search) {\n      posts {\n        ...postData\n      },\n      page,\n      pages,\n      total\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POSTS_BY_USER = gql`\n  query postsByUser($limit: Int, $page: Int, $search: String) {\n    postsByUser (limit: $limit, page: $page, search: $search) {\n      posts {\n        ...postData\n      }\n      page,\n      pages,\n      total\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POST_SHOW = gql`\n  query postShow($id: ID!) {\n    postShow (id: $id) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n\n\n","import React from \"react\";\n\n\nconst Image = ({ image, handleImageRemove = (f) => f }) => (\n    <img \n        src={image.url}\n        key={image.public_id}\n        alt={image.public_id}\n        style={{ height: \"100px\" }}\n        className=\"img-thumbnail my-3\"\n        onClick={() => handleImageRemove(image.public_id)}\n    />\n);\n\nexport default Image;","import React from \"react\";\nimport Image from \"./Image\";\nimport { Link } from \"react-router-dom\";\n\nconst PostCard = ({ post, onShow, onShowDelete, onShowUpdate, postModal, email }) => {\n\n  const { image, content } = post;\n\n  const handleShow = (post) => {\n    onShow()\n    postModal(post)\n  }\n\n  const handleUpdate = (post) => {\n    onShowUpdate()\n    postModal(post)\n  }\n\n  const handleDelete = (post) => {\n    onShowDelete()\n    postModal(post)\n  }\n\n  return (\n    <div className=\"card text-center\" style={{ minHeight: \"375px \" }}>\n      <div className=\"card-body\">\n        <Image image={image} />\n        <Link to={`/user/${post.postedBy.username}`}>\n          <h4 className=\"text-primary\">@{post.postedBy.username}</h4>\n        </Link>\n        <hr />\n        <small>{content}</small>\n      </div>\n        <div className=\"card-footer\">\n          <div className=\"row\">\n            <div className=\"col-4 text-center m-0 p-0\">\n              <button onClick={() => handleShow(post)} className=\"btn btn-primary\" type=\"button\">Detalle</button>\n            </div>\n          { (email === post.postedBy.email) && (\n            <>\n              <div className=\"col-4 text-center m-0 p-0\">\n                <button onClick={() => handleUpdate(post)} className=\"btn btn-warning\" type=\"button\">Editar</button>\n              </div>\n              <div className=\"col-4 text-center m-0 p-0\">\n                <button onClick={() => handleDelete(post)} className=\"btn btn-danger\" type=\"button\">Borrar</button>\n              </div>\n            </>\n          )}\n          </div>\n        </div>\n    </div>\n  );\n};\n\nexport default PostCard;\n","import React, { useContext } from \"react\";\nimport { useQuery, useLazyQuery } from \"@apollo/react-hooks\";\nimport { AuthContext } from \"../context/authContext\";\nimport { useHistory } from \"react-router-dom\";\nimport { GET_ALL_POST } from \"../graphql/queries\";\nimport PostCard from \"../components/PostCard\";\n\nconst Home = () => {\n  const { data, loading } = useQuery(GET_ALL_POST);\n  const [fetchPosts, { data: posts }] = useLazyQuery(GET_ALL_POST);\n  // access context\n  const { state } = useContext(AuthContext);\n  // react router\n  let history = useHistory();\n\n  /*const updateUserName = () => {\n    dispatch({\n      type: \"LOGGED_IN_USER\",\n      payload: \"Miguel Chamorro\",\n    });\n  };*/\n\n  if (loading) return <p className=\"p-5\">Loading...</p>;\n\n  return (\n    <div className=\"container\">\n      <div className=\"row p-5\">\n        {data &&\n          data.allPosts.posts.map((post) => (\n            <div className=\"col-md-4 pt-5\" key={post._id}>\n              <PostCard post={post} />\n            </div>\n          ))}\n      </div>\n      <div className=\"row p-5\">\n        <button\n          onClick={() => fetchPosts()}\n          className=\"btn-btn-raised btn-primary\"\n        >\n          Fetch Posts\n        </button>\n      </div>\n      <hr />\n      {JSON.stringify(posts)}\n      <hr />\n      {JSON.stringify(state.user)}\n      <hr />\n      {JSON.stringify(history)}\n    </div>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport Image from \"./Image\";\nimport { Link } from \"react-router-dom\";\n\nconst UserCard = ({ user }) => {\n  const { username, images, about } = user;\n  return (\n    <div className=\"card text-center\" style={{ minHeight: \"375px \" }}>\n      <div className=\"card-body\">\n        <Image image={images[0]} />\n        <Link to={`/user/${username}`}>\n          <h4 className=\"text-primary\">@{username}</h4>\n        </Link>\n        <hr />\n        <small>{about}</small>\n      </div>\n    </div>\n  );\n};\n\nexport default UserCard;\n","import React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ALL_USERS } from \"../graphql/queries\";\nimport UserCard from \"../components/UserCard\";\n\nconst Users = () => {\n  const { data, loading } = useQuery(ALL_USERS);\n\n  if (loading) return <p className=\"p-5\">Loading...</p>;\n\n  return (\n    <div className=\"container\">\n      <div className=\"row p-5\">\n        {data &&\n          data.allUsers.map((user) => (\n            <div className=\"col-md-4 p-2\" key={user._id}>\n              <UserCard user={user} />\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Users;\n","import React from \"react\";\n\nconst AuthForm = ({\n  email = \"\",\n  password = \"\",\n  loading,\n  setEmail = (f) => f,\n  setPassword,\n  handleSubmit,\n  showPasswordInput = false,\n  hideEmailInput = false,\n}) => (\n  <form onSubmit={handleSubmit}>\n    {!hideEmailInput && (\n      <div className=\"form-group\">\n        <label>Email Address</label>\n        <input\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          className=\"form-control\"\n          placeholder=\"Enter email\"\n          disabled={loading}\n        />\n      </div>\n    )}\n\n    {showPasswordInput && (\n      <div className=\"form-group\">\n        <label>Password</label>\n        <input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"form-control\"\n          placeholder=\"Enter password\"\n          disabled={loading}\n          required\n        />\n      </div>\n    )}\n\n    <button className=\"btn btn-raised btn-primary\" disabled={loading}>\n      Submit\n    </button>\n  </form>\n);\n\nexport default AuthForm;\n","import React, { useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst Register = () => {\n  const [email, setEmail] = useState(\"mchamorro@laescala.cl\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const config = {\n      url: process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT,\n      handleCodeInApp: true,\n    };\n    const result = await auth.sendSignInLinkToEmail(email, config);\n    console.log(\"result\", result);\n    // show toast notification to user about email sent\n    toast.success(\n      `Email is sent to ${email}, click the link to complete your registration.`\n    );\n    // save user email to local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n    // clear state\n    setEmail(\"\");\n    setLoading(\"\");\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading...</h4>\n      ) : (\n        <h4>Register</h4>\n      )}\n      <AuthForm email={email} loading={loading} setEmail={setEmail} handleSubmit={handleSubmit} />\n    </div>\n  );\n};\n\nexport default Register;\n","import React, { useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst PasswordUpdate = () => {\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    auth.currentUser\n      .updatePassword(password)\n      .then(() => {\n        setLoading(false);\n        toast.success(\"Password updated\");\n      })\n      .catch((error) => {\n        setLoading(false);\n        toast.error(error.message);\n      });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading...</h4>\n      ) : (\n        <h4>Password update</h4>\n      )}\n\n      <AuthForm\n        password={password}\n        setPassword={setPassword}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        showPasswordInput=\"true\"\n        hideEmailInput=\"true\"\n      />\n    </div>\n  );\n};\n\nexport default PasswordUpdate;\n","import React, { useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst PasswordForgot = () => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const config = {\n      url: process.env.REACT_APP_PASSWORD_FORGOT_REDIRECT,\n      handleCodeInApp: true,\n    };\n\n    await auth\n      .sendPasswordResetEmail(email, config)\n      .then(() => {\n        setEmail(\"\");\n        setLoading(false);\n        toast.success(\n          `Email is sent to ${email}. Click on the link to reset your password`\n        );\n      })\n      .catch((error) => {\n        setLoading(false);\n        console.log(\"error on password forgot email\", error);\n      });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? <h4>Loading...</h4> : <h4>Forgot Password </h4>}\n\n      <AuthForm\n        email={email}\n        setEmail={setEmail}\n        loading={loading}\n        handleSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default PasswordForgot;\n","import { gql } from \"apollo-boost\";\nimport { USER_INFO, POST_DATA }  from \"./fragments\";\n\nexport const USER_UPDATE = gql`\n  mutation userUpdate($input: UserUpdateInput!) {\n    userUpdate(input: $input) {\n      ...userInfo\n    }\n  }\n  ${USER_INFO}\n`;\n\nexport const USER_CREATE = gql`\n  mutation userCreate {\n    userCreate {\n      username\n      email\n    }\n  }\n`;\n\nexport const POST_CREATE = gql`\n  mutation postCreate($input: PostCreateInput!) {\n    postCreate(input: $input) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POST_UPDATE = gql`\n  mutation postUpdate($id: ID!, $input: PostCreateInput!) {\n    postUpdate(id: $id, input: $input) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POST_DELETE = gql`\n  mutation postDelete($id: ID!) {\n    postDelete(id: $id) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n","import React from \"react\";\n\nconst UserProfile = ({\n  handleSubmit,\n  handleChange,\n  username,\n  name,\n  email,\n  about,\n  loading,\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div className=\"form-group\">\n      <label>Username</label>\n      <input\n        type=\"text\"\n        name=\"username\"\n        value={username}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"Username\"\n        disabled={loading}\n      />\n    </div>\n\n    <div className=\"form-group\">\n      <label>Name</label>\n      <input\n        type=\"text\"\n        name=\"name\"\n        value={name}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"Name\"\n        disabled={loading}\n      />\n    </div>\n\n    <div className=\"form-group\">\n      <label>Email</label>\n      <input\n        type=\"email\"\n        name=\"email\"\n        value={email}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"Email\"\n        disabled\n      />\n    </div>\n\n    <div className=\"form-group\">\n      <label>About</label>\n      <textarea\n        name=\"about\"\n        value={about}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"About\"\n        disabled={loading}\n      />\n    </div>\n\n    <button\n      className=\"btn btn-primary\"\n      type=\"submit\"\n      disabled={!email || loading}\n    >\n      Submit\n    </button>\n  </form>\n);\n\nexport default UserProfile;\n","import React, { useContext } from \"react\";\nimport Resizer from \"react-image-file-resizer\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/authContext\";\nimport Image from \"./Image\";\n\nconst FileUpload = ({\n  setValues,\n  setLoading,\n  values,\n  singleUpload = false,\n}) => {\n  const { state } = useContext(AuthContext);\n\n  const fileResizeAndUpload = (event) => {\n    setLoading(true);\n    let fileInput = false;\n    if (event.target.files[0]) {\n      fileInput = true;\n    }\n    if (fileInput) {\n      Resizer.imageFileResizer(\n        event.target.files[0],\n        300,\n        300,\n        \"JPEG\",\n        100,\n        0,\n        (uri) => {\n          axios\n            .post(\n              `${process.env.REACT_APP_REST_ENDPOINT}/uploadimages`,\n              { image: uri },\n              {\n                headers: {\n                  authtoken: state.user.token,\n                },\n              }\n            )\n            .then((response) => {\n              setLoading(false);\n              console.log(\"CLOUDINARY UPLOAD\", response);\n              if (singleUpload) {\n                // single upload\n                const { image } = values;\n                setValues({ ...values, image: response.data });\n              } else {\n                const { images } = values;\n                setValues({ ...values, images: [...images, response.data] });\n              }\n            })\n            .catch((error) => {\n              setLoading(false);\n              console.log(\"CLOUDINARY UPLOAD FAILED\", error);\n            });\n        },\n        \"base64\"\n      );\n    }\n  };\n\n  const handleImageRemove = (id) => {\n    setLoading(true);\n    axios\n      .post(\n        `${process.env.REACT_APP_REST_ENDPOINT}/removeimage`,\n        {\n          public_id: id,\n        },\n        {\n          headers: {\n            authtoken: state.user.token,\n          },\n        }\n      )\n      .then((response) => {\n        setLoading(false);\n        if (singleUpload) {\n          const { image } = values;\n          setValues({\n            ...values,\n            image: {\n              url: \"\",\n              public_id: \"\"\n            }\n          });\n        } else {\n          const { images } = values;\n          let filteredImages = images.filter((item) => {\n          return item.public_id !== id;\n        });\n        setValues({ ...values, images: filteredImages });\n        }\n      })\n      .catch((error) => {\n        setLoading(false);\n        console.log(error);\n      });\n  };\n\n  return (\n    <div className=\"col-md-12 row\">\n      <div className=\"col-md-3\">\n        <div className=\"form-group\">\n          <label className=\"btn btn-primary left\">\n            Upload Image\n            <input\n              hidden\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={fileResizeAndUpload}\n              className=\"form-control\"\n              placeholder=\"Image\"\n            />\n          </label>\n        </div>\n      </div>\n      <div className=\"col-md-9\">\n        {/*for single image*/}\n        {values.image && (\n          <Image\n            image={values.image}\n            key={values.image.public_id}\n            handleImageRemove={handleImageRemove}\n          />\n        )}\n\n        {/*for multiple image*/}\n        {values.images &&\n          values.images.map((image) => (\n            <Image\n              image={image}\n              key={image.public_id}\n              handleImageRemove={handleImageRemove}\n            />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default FileUpload;\n","import React, { useState, useMemo } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport omitDeep from \"omit-deep\";\nimport { PROFILE } from \"../../graphql/queries\";\nimport { USER_UPDATE } from \"../../graphql/mutations\";\nimport UserProfile from \"../../components/forms/UserProfile\";\nimport FileUpload from \"../../components/FileUpload\";\n\nconst Profile = () => {\n  const [values, setValues] = useState({\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    about: \"\",\n    images: [],\n  });\n  const [loading, setLoading] = useState(false);\n\n  const { data } = useQuery(PROFILE);\n\n  useMemo(() => {\n    if (data) {\n      console.log(data.profile);\n      setValues({\n        ...values,\n        username: data.profile.username,\n        name: data.profile.name,\n        email: data.profile.email,\n        about: data.profile.about,\n        images: omitDeep(data.profile.images, [\"__typename\"]),\n      });\n    }\n  }, [data]);\n\n  // mutation\n  const [userUpdate] = useMutation(USER_UPDATE, {\n    update: ({ data }) => {\n      console.log(\"USER UPDATE MUTATION IN PROFILE\", data);\n      toast.success(\"Profile updated\");\n    },\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log(values);\n    setLoading(true);\n    userUpdate({ variables: { input: values } });\n    setLoading(false);\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-12 mb-3\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Profile</h4>\n          )}\n        </div>\n\n        <FileUpload\n          setValues={setValues}\n          setLoading={setLoading}\n          values={values}\n          loading={loading}\n        />\n      </div>\n      <UserProfile\n        {...values}\n        handleChange={handleChange}\n        handleSubmit={handleSubmit}\n        loading={loading}\n      />\n    </div>\n  );\n};\n\nexport default Profile;\n","import React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { auth, googleAuthProvider } from \"../../firebase\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst Login = () => {\n  const { dispatch } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"thevilos@gmail.com\");\n  const [password, setPassword] = useState(\"escalab2021\");\n  const [loading, setLoading] = useState(false);\n\n  let history = useHistory();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await auth\n        .signInWithEmailAndPassword(email, password)\n        .then(async (result) => {\n          const { user } = result;\n          const idTokenResult = await user.getIdTokenResult();\n\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: { email: user.email, token: idTokenResult.token },\n          });\n\n          history.push(\"/\");\n        });\n    } catch (error) {\n      console.log(\"login error\", error);\n      toast.error(error.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = () => {\n    auth.signInWithPopup(googleAuthProvider).then(async (result) => {\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n\n      dispatch({\n        type: \"LOGGED_iN_USER\",\n        payload: { email: user.email, token: idTokenResult.token },\n      });\n      history.push(\"/profile\");\n    });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? <h4 className=\"text-danger\">Loading...</h4> : <h4>Login</h4>}\n      <button onClick={googleLogin} className=\"btn btn-raised btn-danger mt-5\">\n        Login with Google\n      </button>\n      <AuthForm\n        email={email}\n        setEmail={setEmail}\n        password={password}\n        setPassword={setPassword}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        showPasswordInput=\"true\"\n      />\n      <Link className=\"text-danger float-right\" to=\"/password/forgot\">\n        Forgot Password\n      </Link>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport AuthForm from \"../../components/forms/AuthForm\";\nimport { USER_CREATE } from \"../../graphql/mutations\";\n\nconst CompleteRegistration = () => {\n  const { dispatch } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  let history = useHistory();\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n  }, [history]);\n\n  const [userCreate] = useMutation(USER_CREATE);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // validation\n    if (!email || !password) {\n      toast.error(\"Email and password is required\");\n      return;\n    }\n    try {\n      const result = await auth.signInWithEmailLink(\n        email,\n        window.location.href\n      );\n      // console.log(result);\n      if (result.user.emailVerified) {\n        // remove email from local storage\n        window.localStorage.removeItem(\"emailForRegistration\");\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n\n        // dispatch user with token and email\n        // then redirect\n        const idTokenResult = await user.getIdTokenResult();\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: { email: user.email, token: idTokenResult.token },\n        });\n        // make api request to save/update user in mongodb\n        userCreate();\n        history.push(\"/password/update\");\n      }\n    } catch (error) {\n      console.log(\"register complete error\", error.message);\n      setLoading(false);\n      toast.error(error.message);\n    }\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading...</h4>\n      ) : (\n        <h4>Complete Your Registration</h4>\n      )}\n      <AuthForm\n        email={email}\n        setEmail={setEmail}\n        password={password}\n        setPassword={setPassword}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        showPasswordInput=\"true\"\n      />\n    </div>\n  );\n};\n\nexport default CompleteRegistration;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst LoadingToRedirect = ({ path }) => {\n  const [count, setCount] = useState(5);\n  let history = useHistory();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCount((currentCount) => --currentCount);\n    }, 1000);\n    count === 0 && history.push(path);\n    // cleanup\n    return () => clearInterval(interval);\n  }, [count]);\n\n  return (\n    <div className=\"container p-5 text-center\">\n      <p>Redirecting you in {count} seconds...</p>\n    </div>\n  );\n};\n\nexport default LoadingToRedirect;\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { Route, Link } from \"react-router-dom\";\nimport { AuthContext } from \"../context/authContext\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\n\nconst PrivateRoute = ({ ...rest }) => {\n  const { state } = useContext(AuthContext);\n  const [user, setUser] = useState(false);\n\n  useEffect(() => {\n    if (state.user) {\n      setUser(true);\n    }\n  }, [state.user]);\n\n  const navLinks = () => (\n    <nav>\n      <ul className=\"nav flex-column\">\n        <li className=\"nav-item\">\n          <Link className=\"nav-link\" to=\"/profile\">\n            Profile\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link className=\"nav-link\" to=\"/password/update\">\n            Password\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link className=\"nav-link\" to=\"/post/create\">\n            Post\n          </Link>\n        </li>\n      </ul>\n    </nav>\n  );\n\n  const renderContent = () => (\n    <div className=\"container-fluid pt-5\">\n      <div className=\"row\">\n        <div className=\"col-md-4\">{navLinks()}</div>\n        <div className=\"col-md-8\">\n          <Route {...rest} />\n        </div>\n      </div>\n    </div>\n  );\n\n  return user ? renderContent() : <LoadingToRedirect path=\"/login\" />;\n};\n\nexport default PrivateRoute;\n","import React, { useContext, useEffect } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../context/authContext\";\n\nconst PublicRoute = ({ ...rest }) => {\n  const { state } = useContext(AuthContext);\n  let history = useHistory();\n\n  useEffect(() => {\n    if (state.user) {\n      history.push(\"profile\");\n    }\n  }, [history, state.user]);\n\n  return (\n    <div className=\"container-fluid p-5\">\n      <Route {...rest} />\n    </div>\n  );\n};\n\nexport default PublicRoute;\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Modal, Button } from \"react-bootstrap\";\n\n\nconst PostUpdateModal = ({ show, onClose, postModal, postDelete, setPostId }) => {\n    const handleConfirmDelete = async (id) => {\n      await setPostId(id);\n      postDelete({ variables: { id } });\n      onClose();\n      toast.success(\"Post deleted\");\n    }\n\n    return (\n        <>\n            <Modal show={show} onHide={onClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Delete Post</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <p>Are you sure to delete the post:</p>\n                    <p><b>{ postModal?.content }</b>?</p>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={onClose}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={() => handleConfirmDelete(postModal?._id)}>\n                        Confirm\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n  \n  export default PostUpdateModal;","import React, { useState, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport FileUpload from \"../../components/FileUpload\";\nimport { POST_CREATE } from \"../../graphql/mutations\";\nimport { POSTS_BY_USER } from \"../../graphql/queries\";\nimport PostCard from \"../../components/PostCard\";\nimport PostDeleteModal from \"../../components/modals/PostDelete\";\nimport { AuthContext } from \"../../context/authContext\";\n\nconst initialState = {\n  content: \"\",\n  image: {\n    url: \"https://via.placeholder.com/200x200.png?text=Post\",\n    public_id: \"123\",\n  },\n};\n\nconst Post = () => {\n  const context = useContext(AuthContext);\n\n  const [show, setShow] = useState(false);\n  const [postModal, setPostModal] = useState('');\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const [values, setValues] = useState(initialState);\n  const [loading, setLoading] = useState(false);\n  const [limit, setLimit] = useState(20);\n  const [page, setPage] = useState(1);\n\n  //query\n  const { data: myData } = useQuery(POSTS_BY_USER, { variables: { limit, page } });\n\n  // destrecture\n  const { content } = values;\n\n\n  // mutation\n  const [postCreate] = useMutation(POST_CREATE, {\n    // read query from cache / write query to cache\n    update: (cache, { data: { postCreate } }) => {\n      // read Query from cache\n      const { postsByUser } = cache.readQuery({\n        query: POSTS_BY_USER,\n        variables: { limit, page }\n      });\n      // write Query to cache\n      cache.writeQuery({\n        query: POSTS_BY_USER,\n        variables: { limit, page },\n        data: {\n          postsByUser: {\n            __typename: \"PostInfo\",\n            posts: [postCreate, ...postsByUser.posts],\n          }\n          // postsByUser: [postCreate, ...postsByUser],\n        },\n      });\n    },\n    onError: (err) => console.log(err.graphqlQLError[0].message),\n  });\n\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    postCreate({ variables: { input: values } });\n    setValues(initialState);\n    setLoading(false);\n    toast.success(\"Post created\");\n  };\n\n  const handleChange = (e) => {\n    e.preventDefault();\n    setValues({ ...values, [e.target.name]: e.target.value });\n  };\n\n  const createForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <textarea\n          value={content}\n          onChange={handleChange}\n          name=\"content\"\n          rows=\"5\"\n          className=\"md-textarea form-control\"\n          placeholder=\"Write something cool\"\n          maxLength=\"150\"\n          disabled={loading}\n        ></textarea>\n      </div>\n\n      <button\n        className=\"btn btn-primary\"\n        type=\"submit\"\n        disabled={loading || !content}\n      >\n        Post\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? <h4 className=\"text-danger\">Loading</h4> : <h4>Create</h4>}\n\n      <FileUpload\n        values={values}\n        loading={loading}\n        setValues={setValues}\n        setLoading={setLoading}\n        singleUpload={true}\n      />\n\n      <div className=\"row\">\n        <div className=\"col\">{createForm()}</div>\n      </div>\n      <hr />\n      <div className=\"row p-5\">\n        { myData &&\n          myData.postsByUser.posts.map((post) => (\n            <div className=\"col-md-6 pt-5\" key={post._id}>\n              <PostCard post={post} onShow={handleShow} postModal={setPostModal} />\n            </div>\n          )) }\n      </div>\n\n      <PostDeleteModal show={show} onClose={handleClose} postModal={postModal} limit={limit} page={page} />\n    </div>\n  );\n};\n\nexport default Post;\n","import React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { useParams } from \"react-router-dom\";\nimport UserCard from \"../components/UserCard\";\nimport { PUBLIC_PROFILE } from \"../graphql/queries\";\n\nconst SingleUser = () => {\n  let params = useParams();\n  const { loading, data } = useQuery(PUBLIC_PROFILE, {\n    variables: { username: params.username },\n  });\n\n  if (loading) return <p className=\"p-5\">Loading...</p>;\n\n  return (\n    <div className=\"container\">\n      <br />\n      <br />\n      <UserCard user={data.publicProfile} />\n    </div>\n  );\n};\n\nexport default SingleUser;\n","import React, { useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { toast } from \"react-toastify\";\nimport FileUpload from \"../FileUpload\";\n\nconst initialState = {\n    id: \"\",\n    content: \"\",\n    image: {\n        url: \"https://via.placeholder.com/200x200.png?text=Post\",\n        public_id: \"123\",\n    },\n};\n\nconst PostUpdateModal = ({ show, onClose, postModal, postUpdate }) => {\n    \n    const [loading, setLoading] = useState(false);\n\n    const [values, setValues] = useState(initialState);\n\n    const handleChange = (e) => {\n        e.preventDefault();\n        setValues({ ...values, [e.target.name]: e.target.value });\n    }\n\n    const { content } = values;\n\n    const handleSubmit = () => {\n        setLoading(true);\n        const id =  values.id;\n        delete values.id;\n        postUpdate({ variables: { id: id, input: values } });\n        setLoading(false);\n        onClose();\n        toast.success(\"Post updated\");\n    }\n\n    useEffect(() => {\n        if(postModal) {\n            const dataModal = {\n                id: postModal?._id,\n                content: postModal?.content,\n                image: {\n                    url: postModal?.image?.url,\n                    public_id: postModal?.image?.public_id,\n                },\n            }\n            setValues(dataModal);\n        }\n    }, [postModal])\n\n    const updateForm = () => (\n        <>\n          <div className=\"form-group\">\n            <textarea\n              value={content}\n              onChange={handleChange}\n              name=\"content\"\n              rows=\"5\"\n              className=\"md-textarea form-control\"\n              placeholder=\"Write something cool\"\n              maxLength=\"150\"\n              disabled={loading}\n            ></textarea>\n          </div>\n        </>\n      );\n\n    return (\n        <>\n            <Modal show={show} onHide={onClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>{loading ? <h4 className=\"text-danger\">Loading</h4> : <h4>Post Update</h4> }</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <FileUpload\n                        values={values}\n                        loading={loading}\n                        setValues={setValues}\n                        setLoading={setLoading}\n                        singleUpload={true}\n                    />\n                    { updateForm() }\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={onClose}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleSubmit} disabled={loading || !content}>\n                        Confirm\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    )\n}\n\nexport default PostUpdateModal;","import React from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\n\nconst PostModalShow = ({ show, onClose, postModal }) => {\n\n    return (\n        <>\n            <Modal show={show} onHide={onClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Show Post</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <img \n                        src={postModal.image.url}\n                        key={postModal.image.public_id}\n                        alt={postModal.image.public_id}\n                        style={{ height: \"100px\" }}\n                        className=\"img-thumbnail mb-4\"\n                    />\n                    <p>Content</p>\n                    <p><small>{postModal.content}</small></p>\n                    <br/>\n                    <p>Posted By</p>\n                    <p><small>@{ postModal.postedBy.username } - ({ postModal.postedBy.email })</small></p>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={onClose}>\n                        Close\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    )\n}\n\nexport default PostModalShow;","import React, { useState, useEffect, useContext } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { POST_UPDATE, POST_DELETE } from \"../../graphql/mutations\";\nimport { POSTS_BY_USER, GET_ALL_POST } from \"../../graphql/queries\";\nimport PostCard from \"../../components/PostCard\";\nimport PostDeleteModal from \"../../components/modals/PostDelete\";\nimport { useLocation } from \"react-router-dom\";\nimport PostUpdateModal from \"../../components/modals/PostUpdate\";\nimport { AuthContext } from \"../../context/authContext\";\nimport PostModalShow from \"../../components/modals/PostShow\";\n\nconst Posts = () => {\n\n    let emailUser = null;\n    const context = useContext(AuthContext);\n\n    if(context) {\n        if (context.state.user) {\n            const { email } = context.state.user;\n            emailUser = email;\n        }\n    }\n\n    const [show, setShow] = useState(false);\n    const [showDelete, setShowDelete] = useState(false);\n    const [showUpdate, setShowUpdate] = useState(false);\n    const [postModal, setPostModal] = useState('');\n\n    const handleShow = () => setShow(true);\n    const handleClose = () => setShow(false);\n    \n    const handleCloseDelete = () => setShowDelete(false);\n    const handleShowDelete = () => setShowDelete(true);\n\n    const handleShowUpdate = () => setShowUpdate(true);\n    const handleCloseUpdate = () => setShowUpdate(false);\n\n    const [loading, setLoading] = useState(false);\n    const [page, setPage] = useState(1);\n\n    const [limit, setLimit] = useState(6);\n    const [search, setSearch] = useState(\"\");\n    const [result, setResult] = useState(\"\");\n    const [postId, setPostId] = useState(\"\");\n\n    const { data } = useQuery(GET_ALL_POST, { variables: { limit, page, search: result } });\n\n    const [postUpdate] = useMutation(POST_UPDATE, {\n        // read query from cache / write query to cache\n        update: (cache, { data: { postUpdate } }) => {\n            // read Query from cache\n            const { allPosts } = cache.readQuery({\n                query: GET_ALL_POST,\n                variables: { limit, page, search: result }\n            });\n            console.log(\"allPosts\", allPosts)\n            // write Query to cache\n            cache.writeQuery({\n                query: GET_ALL_POST,\n                variables: { limit, page, search: result },\n                data: {\n                    allPosts: {\n                        __typename: \"PostInfo\",\n                        posts: allPosts.posts,\n                    },\n                    // postsByUser: [postCreate, ...postsByUser],\n                },\n            });\n        },\n        onError: (err) => console.log(err.graphqlQLError[0].message),\n    });\n\n    const [postDelete] = useMutation(POST_DELETE, {\n        // read query from cache / write query to cache\n        update: (cache, { data: { postDeleted } }) => {\n          // read Query from cache\n          const { allPosts } = cache.readQuery({\n            query: GET_ALL_POST,\n            variables: { limit, page, search: result }\n          });\n          // write Query to cache\n          cache.writeQuery({\n            query: GET_ALL_POST,\n            variables: { limit, page, search: result },\n            data: {\n              allPosts: {\n                __typename: \"PostInfo\",\n                posts: allPosts.posts.filter((post) => post._id !== postId)\n              }\n              // postsByUser: [postCreate, ...postsByUser],\n            },\n          });\n        },\n        onError: (err) => console.log(err.graphqlQLError[0].message),\n    });\n\n    // useLocation\n    const location = useLocation();\n\n    useEffect(() => {\n        console.log(\"cambiando resultado\");\n    }, [data]);\n\n    useEffect(() => {\n        if(location.pathname && location.state) {\n            setLoading(true);\n            setResult(location.state.search);\n            setLoading(false);\n        }\n     }, [location]);\n\n    const handleLimit = (e) => {\n        e.preventDefault();\n        console.log(e.target.value);\n        setPage(1);\n        setLimit(parseInt(e.target.value));\n    }\n\n    const handleSearch = (e) => {\n        setPage(1);\n        setSearch(e.target.value);\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        console.log(\"entro al handleSubmit\");\n        setResult(search);\n    }\n\n    return (\n        <div className=\"container p-5\">\n            { loading ? <h4>Loading....</h4> : <h1 className=\"text-center\">All Posts</h1> }\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <form className=\"form-inline mt-5 float-right\" onSubmit={handleSubmit}>\n                        <div className=\"form-group my-2 my-lg-0 mr-3\">\n                            <input\n                                className=\"form-control mr-sm-2\"\n                                type=\"search\"\n                                name=\"search\"\n                                onChange={handleSearch}\n                                value={search}\n                                placeholder=\"\"\n                                aria-label=\"Search\"\n                            />\n                            <button\n                                className=\"btn btn-outline-success my-2 my-sm-0\"\n                                type=\"submit\"\n                            >\n                                <span>Search</span>\n                                {/* <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-search\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\n                                </svg> */}\n                            </button>\n                        </div>\n                        <div className=\"form-group\">\n                            <select className=\"custom-select\" onChange={handleLimit}>\n                                <option value=\"\">N por pgina</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"6\">6</option>\n                                <option value=\"9\">9</option>\n                                <option value=\"12\">12</option>\n                            </select>\n                        </div>\n                    </form>          \n                </div>\n            </div>\n            \n            <div className=\"row\">\n                { data &&  \n                    data.allPosts.posts.map((post) => (\n                        <div className=\"col-md-4 pt-5\" key={post._id}>\n                            <PostCard \n                                post={post}  \n                                onShow={handleShow}\n                                onShowDelete={handleShowDelete} \n                                onShowUpdate={handleShowUpdate} \n                                postModal={setPostModal} \n                                email={emailUser} />\n                        </div>\n                    ))\n                }\n            </div>\n            <div className=\"row\">\n                <div className=\"col-12 text-center pt-5\">\n                    { data && (page <= data.allPosts.pages && page > 1) && (\n                            <button onClick={() => setPage(pageCount => pageCount - 1)} className=\"btn btn-primary float-left\" type=\"button\">Prev Page</button>       \n                        )\n                    }\n                \n                    { data && (page != data.allPosts.pages) && (\n                        <button onClick={() => setPage(pageCount => pageCount + 1)} className=\"btn btn-primary float-right\" type=\"button\">Next Page</button>     \n                    )  \n                    } \n                </div>\n            </div>\n            { show && (\n                <PostModalShow show={show} onClose={handleClose} postModal={postModal} />\n            ) }\n            { showDelete && (\n                <PostDeleteModal show={showDelete} onClose={handleCloseDelete} postModal={postModal} postDelete={postDelete} setPostId={setPostId} />\n            ) }\n            { showUpdate && (\n                <PostUpdateModal show={showUpdate} onClose={handleCloseUpdate} postModal={postModal} postUpdate={postUpdate} />\n            ) }\n        </div>\n    );\n}\n\nexport default Posts; ","import React, { useState, useMemo } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useParams } from \"react-router-dom\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { POST_SHOW } from \"../../graphql/queries\";\nimport { POST_UPDATE } from \"../../graphql/mutations\";\n\nconst initialState = {\n    id: \"\",\n    content: \"\",\n    image_url: \"\",\n}\n\nexport const SinglePost = () => {\n    const { idPost } = useParams();\n    const { loading, data } = useQuery(POST_SHOW, { variables: { id: idPost } });\n    \n    const [values, setValues] = useState(initialState);\n    const [loadingForm, setLoading] = useState(false);\n    const { id, content } = values;\n\n    useMemo(() => {\n        if (data) {\n          console.log(data.postShow);\n          setValues({\n            ...values,\n            id: data.postShow._id,\n            content: data.postShow.content,\n            image_url: data.postShow.image.url\n          });\n        }\n    }, [data]);\n\n    //useMutation\n    const [postUpdate] = useMutation(POST_UPDATE, {\n        update: ({ data: dataPost }) => {\n          console.log(\"POST UPDATE MUTATION\", dataPost);\n          toast.success(\"Post updated\");\n        },\n      });\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setLoading(true);\n        postUpdate({ variables: { id: values.id, input: { content: values.content } } });\n        setLoading(false);\n    }\n\n    const handleChange = (e) => {\n        setValues({ ...values, [e.target.name]: e.target.value });\n    }\n\n    console.log(idPost);\n    return (\n        <div className=\"container p-5\">\n            {  loading ? <h3>Loading...</h3> :\n                <div className=\"row\">   \n                    <div className=\"col-12\">    \n                        <h3>Actualizar Post</h3>\n                    </div> \n                    <div className=\"col-12\">\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"form-group\">\n                                <input type=\"hidden\" name=\"id\" value={id} />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"content\">Description</label>\n                                <textarea onChange={handleChange} className=\"form-control\" id=\"content\" name=\"content\" rows=\"5\" value={content}>\n                                </textarea>\n                            </div>\n                            <div className=\"form-group\">\n                                <button className=\"btn btn-primary\" type=\"submit\">Guardar Cambios</button>\n                            </div>\n                        </form>\n                    </div>\n                </div> }\n        </div>\n    )\n}\n\nexport default SinglePost;\n","import React, { useContext } from \"react\";\nimport ApolloClient from \"apollo-boost\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport { AuthContext } from \"./context/authContext\";\nimport { ToastContainer } from \"react-toastify\";\nimport Nav from \"./components/Nav\";\nimport Home from \"./pages/Home\";\nimport Users from \"./pages/Users\";\nimport Register from \"./pages/auth/Register\";\nimport PasswordUpdate from \"./pages/auth/PasswordUpdate\";\nimport PasswordForgot from \"./pages/auth/PasswordForgot\";\nimport Profile from \"./pages/auth/Profile\";\nimport Login from \"./pages/auth/Login\";\nimport CompleteRegistration from \"./pages/auth/CompleteRegistration\";\nimport PrivateRoute from \"./components/PrivateRoute\";\nimport PublicRoute from \"./components/PublicRoute\";\nimport Post from \"./pages/post/Post\";\nimport SingleUser from \"./pages/SingleUser\";\nimport Posts from \"./pages/post/Posts\";\nimport SinglePost from \"./pages/post/SinglePost\";\n\nconst App = () => {\n  const { state } = useContext(AuthContext);\n  const { user } = state;\n\n  const client = new ApolloClient({\n    uri: process.env.REACT_APP_GRAPHQL_ENDPOINT,\n    request: (operation) => {\n      operation.setContext({\n        headers: {\n          authtoken: user ? user.token : \"\",\n        },\n      });\n    },\n  });\n\n  return (\n    <ApolloProvider client={client}>\n      <Nav />\n      <ToastContainer />\n      <Switch>\n        <Route exact path={`${process.env.REACT_APP_BASE_URL}/`} component={Home} />\n        <Route exact path={`${process.env.REACT_APP_BASE_URL}/users`} component={Users} />\n        <Route exact path={`${process.env.REACT_APP_BASE_URL}/posts`} component={Posts} />\n        <PublicRoute exact path={`${process.env.REACT_APP_BASE_URL}/register`} component={Register} />\n        <PublicRoute exact path={`${process.env.REACT_APP_BASE_URL}/login`} component={Login} />\n        <Route\n          exact\n          path={`${process.env.REACT_APP_BASE_URL}/complete-registration`}\n          component={CompleteRegistration}\n        />\n        <Route exact path={`${process.env.REACT_APP_BASE_URL}/password/forgot`} component={PasswordForgot} />\n        <PrivateRoute\n          exact\n          path={`${process.env.REACT_APP_BASE_URL}/password/update`}\n          component={PasswordUpdate}\n        />\n        <PrivateRoute exact path={`${process.env.REACT_APP_BASE_URL}/profile`} component={Profile} />\n        <PrivateRoute exact path={`${process.env.REACT_APP_BASE_URL}/post/create`} component={Post} />\n        <PrivateRoute exact path={`${process.env.REACT_APP_BASE_URL}/post/:idPost`} component={SinglePost} />\n        <Route exact path={`${process.env.REACT_APP_BASE_URL}/user/:username`} component={SingleUser} />\n      </Switch>\n    </ApolloProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { AuthProvider } from \"./context/authContext\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}