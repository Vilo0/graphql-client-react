{"version":3,"sources":["firebase.js","context/authContext.js","components/Nav.js","graphql/fragments.js","graphql/queries.js","components/Image.js","components/PostCard.js","components/UserCard.js","pages/Users.js","components/forms/AuthForm.js","pages/auth/Register.js","pages/auth/PasswordUpdate.js","pages/auth/PasswordForgot.js","graphql/mutations.js","components/forms/UserProfile.js","components/FileUpload.js","pages/auth/Profile.js","pages/auth/Login.js","pages/auth/CompleteRegistration.js","components/LoadingToRedirect.js","components/PrivateRoute.js","components/PublicRoute.js","components/modals/PostDelete.js","pages/post/Post.js","pages/SingleUser.js","components/modals/PostUpdate.js","components/modals/PostShow.js","pages/post/Posts.js","pages/post/SinglePost.js","App.js","index.js"],"names":["firebase","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","googleAuthProvider","GoogleAuthProvider","firebaseReducer","state","action","type","user","payload","initialState","AuthContext","createContext","AuthProvider","children","useReducer","dispatch","history","useHistory","useEffect","listen","location","console","log","pathname","unsubscribe","onAuthStateChanged","a","getIdTokenResult","idTokenResult","email","token","value","Provider","Nav","useContext","useState","search","setSearch","className","to","data-toogle","data-target","aria-controls","aria-expanded","aria-label","id","activeClassName","split","onClick","signOut","href","onSubmit","e","preventDefault","push","placeholder","onChange","target","name","USER_INFO","gql","POST_DATA","PROFILE","PUBLIC_PROFILE","ALL_USERS","TOTAL_POST","GET_ALL_POST","POSTS_BY_USER","POST_SHOW","Image","image","handleImageRemove","f","src","url","alt","public_id","style","height","PostCard","post","onShow","onShowDelete","onShowUpdate","postModal","content","minHeight","postedBy","username","handleShow","handleUpdate","handleDelete","UserCard","images","about","Users","useQuery","data","loading","allUsers","map","_id","AuthForm","password","setEmail","setPassword","handleSubmit","showPasswordInput","hideEmailInput","disabled","required","Register","setLoading","config","handleCodeInApp","sendSignInLinkToEmail","result","toast","success","window","localStorage","setItem","PasswordUpdate","currentUser","updatePassword","then","catch","error","message","PasswordForgot","sendPasswordResetEmail","USER_UPDATE","USER_CREATE","POST_CREATE","POST_UPDATE","POST_DELETE","UserProfile","handleChange","FileUpload","setValues","values","singleUpload","axios","headers","authtoken","response","filteredImages","filter","item","hidden","accept","event","fileInput","files","Resizer","imageFileResizer","uri","Profile","text","setText","setIsCopied","onCopyText","useMemo","profile","omitDeep","useMutation","update","userUpdate","onCopy","variables","input","Login","signInWithEmailAndPassword","signInWithPopup","CompleteRegistration","getItem","userCreate","signInWithEmailLink","emailVerified","removeItem","LoadingToRedirect","path","count","setCount","interval","setInterval","currentCount","clearInterval","PrivateRoute","rest","setUser","PublicRoute","PostUpdateModal","show","onClose","postDelete","setPostId","handleConfirmDelete","Modal","onHide","Header","closeButton","Title","Body","Footer","Button","variant","Post","setShow","setPostModal","limit","page","myData","cache","postCreate","postsByUser","readQuery","query","writeQuery","__typename","posts","onError","err","graphqlQLError","rows","maxLength","PostDelete","SingleUser","params","useParams","publicProfile","postUpdate","dataModal","PostModalShow","Posts","emailUser","context","showDelete","setShowDelete","showUpdate","setShowUpdate","handleShowDelete","handleShowUpdate","setPage","setLimit","setResult","postId","total","allPosts","postDeleted","useLocation","JSON","stringify","totalPosts","parseInt","pages","pageCount","PostUpdate","image_url","SinglePost","idPost","postShow","dataPost","htmlFor","App","client","ApolloClient","request","operation","setContext","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0b1b246c.chunk.js","sourcesContent":["import * as firebase from \"firebase\";\n// firebase config\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_APIKEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECTID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\n  appId: process.env.REACT_APP_FIREBASE_APPID\n};\n\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\n\nexport const auth = firebase.auth();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();  \n","import React, { useReducer, useEffect, createContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { auth } from \"../firebase\";\n\n// reducer function\nconst firebaseReducer = (state, action) => {\n  switch (action.type) {\n    case \"LOGGED_IN_USER\":\n      return { ...state, user: action.payload };\n    default:\n      return state;\n  }\n};\n\n// state\nconst initialState = {\n  user: null,\n};\n\n// create context\nconst AuthContext = createContext();\n\n// context provider\nconst AuthProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(firebaseReducer, initialState);\n  let history = useHistory();\n\n  useEffect(() => {\n    history.listen((location) => {\n      console.log(`You changed the page to: ${location.pathname}`)\n    })\n  }, [history])\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult();\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: { email: user.email, token: idTokenResult.token },\n        });\n      } else {\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: null,\n        });\n      }\n    });\n    // cleanup\n    return () => unsubscribe();\n  }, []);\n\n  const value = { state, dispatch };\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n\nexport { AuthProvider, AuthContext };\n","import React, { useState, useContext, Fragment } from \"react\";\nimport { Link, NavLink, useHistory } from \"react-router-dom\";\nimport { auth } from \"firebase\";\nimport { AuthContext } from \"../context/authContext\";\n\nconst Nav = () => {\n  const { state, dispatch } = useContext(AuthContext);\n  const [search, setSearch] = useState(\"\");\n  let history = useHistory();\n\n  const { user } = state;\n  console.log(\"user\", user);\n\n  const logout = () => {\n    auth().signOut();\n    dispatch({\n      type: \"LOGGED_IN_USER\",\n      payload: null,\n    });\n  };\n\n  const handleSearch = (e) => {\n    e.preventDefault();\n    console.log(\"valor\", search);\n    history.push({\n      pathname: '/posts',\n      state: { search }\n    });\n  }\n\n  return (\n    <nav className=\"navbar navbar-expand-lg navbar-light bg-light \">\n      <Link className=\"navbar-brand\" to=\"/\">\n        Navbar\n      </Link>\n      <button\n        className=\"navbar-toggler\"\n        type=\"button\"\n        data-toogle=\"collapse\"\n        data-target=\"#navbarSupportedContent\"\n        aria-controls=\"navbarSupportedContent\"\n        aria-expanded=\"false\"\n        aria-label=\"Toggle navigation\"\n      >\n        <span className=\"navbar-toggler-icon\"></span>\n      </button>\n\n      <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n        <ul className=\"navbar-nav mr-auto\">\n          <li className=\"nav-item\">\n            <NavLink className=\"nav-link\" to=\"/users\" activeClassName=\"active\">\n              Users\n            </NavLink>\n          </li>\n\n          <li className=\"nav-item\">\n            <NavLink className=\"nav-link\" to=\"/posts\" activeClassName=\"active\">\n              Posts\n            </NavLink>\n          </li>\n\n          {user && (\n            <li className=\"nav-item\">\n              <NavLink className=\"nav-link\" to=\"/profile\" activeClassName=\"active\">\n                {user && user.email.split(\"@\")[0]}\n              </NavLink>\n            </li>\n          )}\n\n          {!user && (\n            <Fragment>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to=\"/login\">\n                  Login\n                </Link>\n              </li>\n              <li className=\"nav-item\">\n                <Link className=\"nav-link\" to=\"/register\">\n                  Register\n                </Link>\n              </li>\n            </Fragment>\n          )}\n          {user && (\n            <li className=\"nav-item\">\n              <a onClick={logout} href=\"/login\" className=\"nav-item nav-link\">\n                Logout\n              </a>\n            </li>\n          )}\n        </ul>\n        <form onSubmit={handleSearch} className=\"form-inline my-2 my-lg-0\">\n          <input\n            className=\"form-control mr-sm-2\"\n            type=\"search\"\n            placeholder=\"Search\"\n            aria-label=\"Search\"\n            onChange={(e) => setSearch(e.target.value)}\n            name=\"search\"\n          />\n          <button\n            className=\"btn btn-outline-success my-2 my-sm-0\"\n            type=\"submit\"\n          >\n            Search\n          </button>\n        </form>\n      </div>\n    </nav>\n  );\n};\n\nexport default Nav;\n","import { gql } from \"apollo-boost\";\n\nexport const USER_INFO = gql`\n  fragment userInfo on User {\n    _id\n    name\n    username\n    email\n    images {\n      url\n      public_id\n    }\n    about\n    createdAt\n    updatedAt\n  }\n`;\n\nexport const POST_DATA = gql`\n  fragment postData on Post {\n    _id\n    content\n    image {\n      url\n      public_id\n    }\n    postedBy {\n      _id\n      username\n      email\n    }\n  }\n`;\n","import { gql } from \"apollo-boost\";\nimport { USER_INFO, POST_DATA } from \"./fragments\";\n\nexport const PROFILE = gql`\n  query {\n    profile {\n      ...userInfo\n    }\n  }\n  ${USER_INFO}\n`;\n\nexport const PUBLIC_PROFILE = gql`\n  query publicProfile($username: String!) {\n    publicProfile(username: $username) {\n      _id\n      username\n      name\n      email\n      images {\n        url\n        public_id\n      }\n      about\n    }\n  }\n`;\n\nexport const ALL_USERS = gql`\n  query {\n    allUsers {\n      ...userInfo\n    }\n  }\n  ${USER_INFO}\n`;\n\nexport const TOTAL_POST = gql`\n  query {\n    totalPosts\n  }\n`\n\nexport const GET_ALL_POST = gql`\n  query allPosts($limit: Int, $page: Int, $search: String){\n    allPosts(limit: $limit, page: $page, search: $search) {\n      posts {\n        ...postData\n      },\n      page,\n      pages,\n      total\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POSTS_BY_USER = gql`\n  query postsByUser($limit: Int, $page: Int, $search: String) {\n    postsByUser (limit: $limit, page: $page, search: $search) {\n      posts {\n        ...postData\n      }\n      page,\n      pages,\n      total\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POST_SHOW = gql`\n  query postShow($id: ID!) {\n    postShow (id: $id) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n\n\n","import React from \"react\";\n\n\nconst Image = ({ image, handleImageRemove = (f) => f }) => (\n    <img \n        src={image.url}\n        key={image.public_id}\n        alt={image.public_id}\n        style={{ height: \"100px\" }}\n        className=\"img-thumbnail my-3\"\n        onClick={() => handleImageRemove(image.public_id)}\n    />\n);\n\nexport default Image;","import React from \"react\";\nimport Image from \"./Image\";\nimport { Link } from \"react-router-dom\";\n\nconst PostCard = ({ post, onShow, onShowDelete, onShowUpdate, postModal, email }) => {\n\n  const { image, content } = post;\n\n  const handleShow = (post) => {\n    onShow()\n    postModal(post)\n  }\n\n  const handleUpdate = (post) => {\n    onShowUpdate()\n    postModal(post)\n  }\n\n  const handleDelete = (post) => {\n    onShowDelete()\n    postModal(post)\n  }\n\n  return (\n    <div className=\"card text-center\" style={{ minHeight: \"375px \" }}>\n      <div className=\"card-body\">\n        <Image image={image} />\n        <Link to={`/user/${post.postedBy.username}`}>\n          <h4 className=\"text-primary\">@{post.postedBy.username}</h4>\n        </Link>\n        <hr />\n        <small>{content}</small>\n      </div>\n        <div className=\"card-footer\">\n          <div className=\"row\">\n            <div className=\"col-4 text-center m-0 p-0\">\n              <button onClick={() => handleShow(post)} className=\"btn btn-primary\" type=\"button\">Detalle</button>\n            </div>\n          { (email === post.postedBy.email) && (\n            <>\n              <div className=\"col-4 text-center m-0 p-0\">\n                <button onClick={() => handleUpdate(post)} className=\"btn btn-warning\" type=\"button\">Editar</button>\n              </div>\n              <div className=\"col-4 text-center m-0 p-0\">\n                <button onClick={() => handleDelete(post)} className=\"btn btn-danger\" type=\"button\">Borrar</button>\n              </div>\n            </>\n          )}\n          </div>\n        </div>\n    </div>\n  );\n};\n\nexport default PostCard;\n","import React from \"react\";\nimport Image from \"./Image\";\nimport { Link } from \"react-router-dom\";\n\nconst UserCard = ({ user }) => {\n  const { username, images, about } = user;\n  return (\n    <div className=\"card text-center\" style={{ minHeight: \"375px \" }}>\n      <div className=\"card-body\">\n        <Image image={images[0]} />\n        <Link to={`/user/${username}`}>\n          <h4 className=\"text-primary\">@{username}</h4>\n        </Link>\n        <hr />\n        <small>{about}</small>\n      </div>\n    </div>\n  );\n};\n\nexport default UserCard;\n","import React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ALL_USERS } from \"../graphql/queries\";\nimport UserCard from \"../components/UserCard\";\n\nconst Users = () => {\n  const { data, loading } = useQuery(ALL_USERS);\n\n  if (loading) return <p className=\"p-5\">Loading...</p>;\n\n  return (\n    <div className=\"container\">\n      <div className=\"row p-5\">\n        {data &&\n          data.allUsers.map((user) => (\n            <div className=\"col-md-4 p-2\" key={user._id}>\n              <UserCard user={user} />\n            </div>\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Users;\n","import React from \"react\";\n\nconst AuthForm = ({\n  email = \"\",\n  password = \"\",\n  loading,\n  setEmail = (f) => f,\n  setPassword,\n  handleSubmit,\n  showPasswordInput = false,\n  hideEmailInput = false,\n}) => (\n  <form onSubmit={handleSubmit}>\n    {!hideEmailInput && (\n      <div className=\"form-group\">\n        <label>Email Address</label>\n        <input\n          type=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          className=\"form-control\"\n          placeholder=\"Enter email\"\n          disabled={loading}\n        />\n      </div>\n    )}\n\n    {showPasswordInput && (\n      <div className=\"form-group\">\n        <label>Password</label>\n        <input\n          type=\"password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          className=\"form-control\"\n          placeholder=\"Enter password\"\n          disabled={loading}\n          required\n        />\n      </div>\n    )}\n\n    <button className=\"btn btn-raised btn-primary\" disabled={loading}>\n      Submit\n    </button>\n  </form>\n);\n\nexport default AuthForm;\n","import React, { useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst Register = () => {\n  const [email, setEmail] = useState(\"demo@mail.cl\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    const config = {\n      url: process.env.REACT_APP_CONFIRMATION_EMAIL_REDIRECT,\n      handleCodeInApp: true,\n    };\n    const result = await auth.sendSignInLinkToEmail(email, config);\n    console.log(\"result\", result);\n    // show toast notification to user about email sent\n    toast.success(\n      `Email is sent to ${email}, click the link to complete your registration.`\n    );\n    // save user email to local storage\n    window.localStorage.setItem(\"emailForRegistration\", email);\n    // clear state\n    setEmail(\"\");\n    setLoading(\"\");\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading...</h4>\n      ) : (\n        <h4>Register</h4>\n      )}\n      <AuthForm email={email} loading={loading} setEmail={setEmail} handleSubmit={handleSubmit} />\n    </div>\n  );\n};\n\nexport default Register;\n","import React, { useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst PasswordUpdate = () => {\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    auth.currentUser\n      .updatePassword(password)\n      .then(() => {\n        setLoading(false);\n        toast.success(\"Password updated\");\n      })\n      .catch((error) => {\n        setLoading(false);\n        toast.error(error.message);\n      });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading...</h4>\n      ) : (\n        <h4>Password update</h4>\n      )}\n\n      <AuthForm\n        password={password}\n        setPassword={setPassword}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        showPasswordInput=\"true\"\n        hideEmailInput=\"true\"\n      />\n    </div>\n  );\n};\n\nexport default PasswordUpdate;\n","import React, { useState } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst PasswordForgot = () => {\n  const [email, setEmail] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const config = {\n      url: process.env.REACT_APP_PASSWORD_FORGOT_REDIRECT,\n      handleCodeInApp: true,\n    };\n\n    await auth\n      .sendPasswordResetEmail(email, config)\n      .then(() => {\n        setEmail(\"\");\n        setLoading(false);\n        toast.success(\n          `Email is sent to ${email}. Click on the link to reset your password`\n        );\n      })\n      .catch((error) => {\n        setLoading(false);\n        console.log(\"error on password forgot email\", error);\n      });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? <h4>Loading...</h4> : <h4>Forgot Password </h4>}\n\n      <AuthForm\n        email={email}\n        setEmail={setEmail}\n        loading={loading}\n        handleSubmit={handleSubmit}\n      />\n    </div>\n  );\n};\n\nexport default PasswordForgot;\n","import { gql } from \"apollo-boost\";\nimport { USER_INFO, POST_DATA }  from \"./fragments\";\n\nexport const USER_UPDATE = gql`\n  mutation userUpdate($input: UserUpdateInput!) {\n    userUpdate(input: $input) {\n      ...userInfo\n    }\n  }\n  ${USER_INFO}\n`;\n\nexport const USER_CREATE = gql`\n  mutation userCreate {\n    userCreate {\n      username\n      email\n    }\n  }\n`;\n\nexport const POST_CREATE = gql`\n  mutation postCreate($input: PostCreateInput!) {\n    postCreate(input: $input) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POST_UPDATE = gql`\n  mutation postUpdate($id: ID!, $input: PostCreateInput!) {\n    postUpdate(id: $id, input: $input) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n\nexport const POST_DELETE = gql`\n  mutation postDelete($id: ID!) {\n    postDelete(id: $id) {\n      ...postData\n    }\n  }\n  ${POST_DATA}\n`;\n","import React from \"react\";\n\nconst UserProfile = ({\n  handleSubmit,\n  handleChange,\n  username,\n  name,\n  email,\n  about,\n  loading,\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div className=\"form-group\">\n      <label>Username</label>\n      <input\n        type=\"text\"\n        name=\"username\"\n        value={username}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"Username\"\n        disabled={loading}\n      />\n    </div>\n\n    <div className=\"form-group\">\n      <label>Name</label>\n      <input\n        type=\"text\"\n        name=\"name\"\n        value={name}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"Name\"\n        disabled={loading}\n      />\n    </div>\n\n    <div className=\"form-group\">\n      <label>Email</label>\n      <input\n        type=\"email\"\n        name=\"email\"\n        value={email}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"Email\"\n        disabled\n      />\n    </div>\n\n    <div className=\"form-group\">\n      <label>About</label>\n      <textarea\n        name=\"about\"\n        value={about}\n        onChange={handleChange}\n        className=\"form-control\"\n        placeholder=\"About\"\n        disabled={loading}\n      />\n    </div>\n\n    <button\n      className=\"btn btn-primary\"\n      type=\"submit\"\n      disabled={!email || loading}\n    >\n      Submit\n    </button>\n  </form>\n);\n\nexport default UserProfile;\n","import React, { useContext } from \"react\";\nimport Resizer from \"react-image-file-resizer\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/authContext\";\nimport Image from \"./Image\";\n\nconst FileUpload = ({\n  setValues,\n  setLoading,\n  values,\n  singleUpload = false,\n}) => {\n  const { state } = useContext(AuthContext);\n\n  const fileResizeAndUpload = (event) => {\n    setLoading(true);\n    let fileInput = false;\n    if (event.target.files[0]) {\n      fileInput = true;\n    }\n    if (fileInput) {\n      Resizer.imageFileResizer(\n        event.target.files[0],\n        300,\n        300,\n        \"JPEG\",\n        100,\n        0,\n        (uri) => {\n          axios\n            .post(\n              `${process.env.REACT_APP_REST_ENDPOINT}/uploadimages`,\n              { image: uri },\n              {\n                headers: {\n                  authtoken: state.user.token,\n                },\n              }\n            )\n            .then((response) => {\n              setLoading(false);\n              console.log(\"CLOUDINARY UPLOAD\", response);\n              if (singleUpload) {\n                // single upload\n                const { image } = values;\n                setValues({ ...values, image: response.data });\n              } else {\n                const { images } = values;\n                setValues({ ...values, images: [...images, response.data] });\n              }\n            })\n            .catch((error) => {\n              setLoading(false);\n              console.log(\"CLOUDINARY UPLOAD FAILED\", error);\n            });\n        },\n        \"base64\"\n      );\n    }\n  };\n\n  const handleImageRemove = (id) => {\n    setLoading(true);\n    axios\n      .post(\n        `${process.env.REACT_APP_REST_ENDPOINT}/removeimage`,\n        {\n          public_id: id,\n        },\n        {\n          headers: {\n            authtoken: state.user.token,\n          },\n        }\n      )\n      .then((response) => {\n        setLoading(false);\n        if (singleUpload) {\n          const { image } = values;\n          setValues({\n            ...values,\n            image: {\n              url: \"\",\n              public_id: \"\"\n            }\n          });\n        } else {\n          const { images } = values;\n          let filteredImages = images.filter((item) => {\n          return item.public_id !== id;\n        });\n        setValues({ ...values, images: filteredImages });\n        }\n      })\n      .catch((error) => {\n        setLoading(false);\n        console.log(error);\n      });\n  };\n\n  return (\n    <div className=\"col-md-12 row\">\n      <div className=\"col-md-3\">\n        <div className=\"form-group\">\n          <label className=\"btn btn-primary left\">\n            Upload Image\n            <input\n              hidden\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={fileResizeAndUpload}\n              className=\"form-control\"\n              placeholder=\"Image\"\n            />\n          </label>\n        </div>\n      </div>\n      <div className=\"col-md-9\">\n        {/*for single image*/}\n        {values.image && (\n          <Image\n            image={values.image}\n            key={values.image.public_id}\n            handleImageRemove={handleImageRemove}\n          />\n        )}\n\n        {/*for multiple image*/}\n        {values.images &&\n          values.images.map((image) => (\n            <Image\n              image={image}\n              key={image.public_id}\n              handleImageRemove={handleImageRemove}\n            />\n          ))}\n      </div>\n    </div>\n  );\n};\n\nexport default FileUpload;\n","import React, { useState, useMemo, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport omitDeep from \"omit-deep\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport { PROFILE } from \"../../graphql/queries\";\nimport { USER_UPDATE } from \"../../graphql/mutations\";\nimport UserProfile from \"../../components/forms/UserProfile\";\nimport FileUpload from \"../../components/FileUpload\";\nimport { AuthContext } from \"../../context/authContext\";\n\nconst Profile = () => {\n  const [text, setText] = useState(\"\");\n  const [isCopied, setIsCopied] = useState(false);\n\n  const onCopyText = async (token) => {\n    await setText(token);\n    setIsCopied(true);\n    toast.success('token is copied!')\n  };\n\n  const { state } = useContext(AuthContext);\n  const { user } = state;\n\n  const [values, setValues] = useState({\n    username: \"\",\n    name: \"\",\n    email: \"\",\n    about: \"\",\n    images: [],\n  });\n  const [loading, setLoading] = useState(false);\n\n  const { data } = useQuery(PROFILE);\n\n  useMemo(() => {\n    if (data) {\n      console.log(data.profile);\n      setValues({\n        ...values,\n        username: data.profile.username,\n        name: data.profile.name,\n        email: data.profile.email,\n        about: data.profile.about,\n        images: omitDeep(data.profile.images, [\"__typename\"]),\n      });\n    }\n  }, [data]);\n\n  // mutation\n  const [userUpdate] = useMutation(USER_UPDATE, {\n    update: ({ data }) => {\n      // console.log(\"USER UPDATE MUTATION IN PROFILE\", data);\n      toast.success(\"Profile updated\");\n    },\n  });\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.log(values);\n    setLoading(true);\n    userUpdate({ variables: { input: values } });\n    setLoading(false);\n  };\n\n  const handleChange = (e) => {\n    setValues({ ...values, [e.target.name]: e.target.value });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      <div className=\"row\">\n        <div className=\"col-md-12 row mb-5 px-3\">\n          <div className=\"col-md-8\">\n            <input value={user.token} className=\"form-control\" disabled />\n          </div>\n          <div className=\"col-md-4\">\n            <CopyToClipboard text={text} onCopy={() => onCopyText(user.token)}>\n              <div className=\"copy-area\">\n                <button className=\"btn btn-primary btn-outline-primary\">Copy Token to Clipboard</button>\n              </div>\n            </CopyToClipboard>\n          </div>\n        </div>\n        <div className=\"col-md-12 mb-3\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Profile</h4>\n          )}\n        </div>\n\n        <FileUpload\n          setValues={setValues}\n          setLoading={setLoading}\n          values={values}\n          loading={loading}\n        />\n      </div>\n      <UserProfile\n        {...values}\n        handleChange={handleChange}\n        handleSubmit={handleSubmit}\n        loading={loading}\n      />\n    </div>\n  );\n};\n\nexport default Profile;\n","import React, { useState, useContext } from \"react\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { auth, googleAuthProvider } from \"../../firebase\";\nimport AuthForm from \"../../components/forms/AuthForm\";\n\nconst Login = () => {\n  const { dispatch } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"demo@mail.cl\");\n  const [password, setPassword] = useState(\"demo2021\");\n  const [loading, setLoading] = useState(false);\n\n  let history = useHistory();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    try {\n      await auth\n        .signInWithEmailAndPassword(email, password)\n        .then(async (result) => {\n          const { user } = result;\n          const idTokenResult = await user.getIdTokenResult();\n\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: { email: user.email, token: idTokenResult.token },\n          });\n\n          history.push(\"/\");\n        });\n    } catch (error) {\n      console.log(\"login error\", error);\n      toast.error(error.message);\n      setLoading(false);\n    }\n  };\n\n  const googleLogin = () => {\n    auth.signInWithPopup(googleAuthProvider).then(async (result) => {\n      const { user } = result;\n      const idTokenResult = await user.getIdTokenResult();\n\n      dispatch({\n        type: \"LOGGED_iN_USER\",\n        payload: { email: user.email, token: idTokenResult.token },\n      });\n      history.push(\"/profile\");\n    });\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? <h4 className=\"text-danger\">Loading...</h4> : <h4>Login</h4>}\n      <button onClick={googleLogin} className=\"btn btn-raised btn-danger mt-5\">\n        Login with Google\n      </button>\n      <AuthForm\n        email={email}\n        setEmail={setEmail}\n        password={password}\n        setPassword={setPassword}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        showPasswordInput=\"true\"\n      />\n      <Link className=\"text-danger float-right\" to=\"/password/forgot\">\n        Forgot Password\n      </Link>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { auth } from \"../../firebase\";\nimport { toast } from \"react-toastify\";\nimport { useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport AuthForm from \"../../components/forms/AuthForm\";\nimport { USER_CREATE } from \"../../graphql/mutations\";\n\nconst CompleteRegistration = () => {\n  const { dispatch } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  let history = useHistory();\n\n  useEffect(() => {\n    setEmail(window.localStorage.getItem(\"emailForRegistration\"));\n  }, [history]);\n\n  const [userCreate] = useMutation(USER_CREATE);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    // validation\n    if (!email || !password) {\n      toast.error(\"Email and password is required\");\n      return;\n    }\n    try {\n      const result = await auth.signInWithEmailLink(\n        email,\n        window.location.href\n      );\n      // console.log(result);\n      if (result.user.emailVerified) {\n        // remove email from local storage\n        window.localStorage.removeItem(\"emailForRegistration\");\n        let user = auth.currentUser;\n        await user.updatePassword(password);\n\n        // dispatch user with token and email\n        // then redirect\n        const idTokenResult = await user.getIdTokenResult();\n        dispatch({\n          type: \"LOGGED_IN_USER\",\n          payload: { email: user.email, token: idTokenResult.token },\n        });\n        // make api request to save/update user in mongodb\n        userCreate();\n        history.push(\"/password/update\");\n      }\n    } catch (error) {\n      console.log(\"register complete error\", error.message);\n      setLoading(false);\n      toast.error(error.message);\n    }\n  };\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? (\n        <h4 className=\"text-danger\">Loading...</h4>\n      ) : (\n        <h4>Complete Your Registration</h4>\n      )}\n      <AuthForm\n        email={email}\n        setEmail={setEmail}\n        password={password}\n        setPassword={setPassword}\n        loading={loading}\n        handleSubmit={handleSubmit}\n        showPasswordInput=\"true\"\n      />\n    </div>\n  );\n};\n\nexport default CompleteRegistration;\n","import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nconst LoadingToRedirect = ({ path }) => {\n  const [count, setCount] = useState(5);\n  let history = useHistory();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setCount((currentCount) => --currentCount);\n    }, 1000);\n    count === 0 && history.push(path);\n    // cleanup\n    return () => clearInterval(interval);\n  }, [count]);\n\n  return (\n    <div className=\"container p-5 text-center\">\n      <p>Redirecting you in {count} seconds...</p>\n    </div>\n  );\n};\n\nexport default LoadingToRedirect;\n","import React, { useContext, useState, useEffect } from \"react\";\nimport { Route, Link } from \"react-router-dom\";\nimport { AuthContext } from \"../context/authContext\";\nimport LoadingToRedirect from \"./LoadingToRedirect\";\n\nconst PrivateRoute = ({ ...rest }) => {\n  const { state } = useContext(AuthContext);\n  const [user, setUser] = useState(false);\n\n  useEffect(() => {\n    if (state.user) {\n      setUser(true);\n    }\n  }, [state.user]);\n\n  const navLinks = () => (\n    <nav>\n      <ul className=\"nav flex-column\">\n        <li className=\"nav-item\">\n          <Link className=\"nav-link\" to=\"/profile\">\n            Profile\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link className=\"nav-link\" to=\"/password/update\">\n            Password\n          </Link>\n        </li>\n        <li className=\"nav-item\">\n          <Link className=\"nav-link\" to=\"/post/create\">\n            Post\n          </Link>\n        </li>\n      </ul>\n    </nav>\n  );\n\n  const renderContent = () => (\n    <div className=\"container-fluid pt-5\">\n      <div className=\"row\">\n        <div className=\"col-md-4\">{navLinks()}</div>\n        <div className=\"col-md-8\">\n          <Route {...rest} />\n        </div>\n      </div>\n    </div>\n  );\n\n  return user ? renderContent() : <LoadingToRedirect path=\"/login\" />;\n};\n\nexport default PrivateRoute;\n","import React, { useContext, useEffect } from \"react\";\nimport { Route, useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../context/authContext\";\n\nconst PublicRoute = ({ ...rest }) => {\n  const { state } = useContext(AuthContext);\n  let history = useHistory();\n\n  useEffect(() => {\n    if (state.user) {\n      history.push(\"profile\");\n    }\n  }, [history, state.user]);\n\n  return (\n    <div className=\"container-fluid p-5\">\n      <Route {...rest} />\n    </div>\n  );\n};\n\nexport default PublicRoute;\n","import React from \"react\";\nimport { toast } from \"react-toastify\";\nimport { Modal, Button } from \"react-bootstrap\";\n\n\nconst PostUpdateModal = ({ show, onClose, postModal, postDelete, setPostId }) => {\n    const handleConfirmDelete = async (id) => {\n      await setPostId(id);\n      postDelete({ variables: { id } });\n      onClose();\n      toast.success(\"Post deleted\");\n    }\n\n    return (\n        <>\n            <Modal show={show} onHide={onClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Delete Post</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <p>Are you sure to delete the post:</p>\n                    <p><b>{ postModal?.content }</b>?</p>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={onClose}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={() => handleConfirmDelete(postModal?._id)}>\n                        Confirm\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    );\n}\n  \n  export default PostUpdateModal;","import React, { useState, useContext } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport FileUpload from \"../../components/FileUpload\";\nimport { POST_CREATE } from \"../../graphql/mutations\";\nimport { POSTS_BY_USER } from \"../../graphql/queries\";\nimport PostCard from \"../../components/PostCard\";\nimport PostDeleteModal from \"../../components/modals/PostDelete\";\nimport { AuthContext } from \"../../context/authContext\";\n\nconst initialState = {\n  content: \"\",\n  image: {\n    url: \"https://via.placeholder.com/200x200.png?text=Post\",\n    public_id: \"123\",\n  },\n};\n\nconst Post = () => {\n  const context = useContext(AuthContext);\n\n  const [show, setShow] = useState(false);\n  const [postModal, setPostModal] = useState('');\n\n  const handleClose = () => setShow(false);\n  const handleShow = () => setShow(true);\n\n  const [values, setValues] = useState(initialState);\n  const [loading, setLoading] = useState(false);\n  const [limit, setLimit] = useState(20);\n  const [page, setPage] = useState(1);\n\n  //query\n  const { data: myData } = useQuery(POSTS_BY_USER, { variables: { limit, page } });\n\n  // destrecture\n  const { content } = values;\n\n\n  // mutation\n  const [postCreate] = useMutation(POST_CREATE, {\n    // read query from cache / write query to cache\n    update: (cache, { data: { postCreate } }) => {\n      // read Query from cache\n      const { postsByUser } = cache.readQuery({\n        query: POSTS_BY_USER,\n        variables: { limit, page }\n      });\n      // write Query to cache\n      cache.writeQuery({\n        query: POSTS_BY_USER,\n        variables: { limit, page },\n        data: {\n          postsByUser: {\n            __typename: \"PostInfo\",\n            posts: [postCreate, ...postsByUser.posts],\n          }\n          // postsByUser: [postCreate, ...postsByUser],\n        },\n      });\n    },\n    onError: (err) => console.log(err.graphqlQLError[0].message),\n  });\n\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    postCreate({ variables: { input: values } });\n    setValues(initialState);\n    setLoading(false);\n    toast.success(\"Post created\");\n  };\n\n  const handleChange = (e) => {\n    e.preventDefault();\n    setValues({ ...values, [e.target.name]: e.target.value });\n  };\n\n  const createForm = () => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"form-group\">\n        <textarea\n          value={content}\n          onChange={handleChange}\n          name=\"content\"\n          rows=\"5\"\n          className=\"md-textarea form-control\"\n          placeholder=\"Write something cool\"\n          maxLength=\"150\"\n          disabled={loading}\n        ></textarea>\n      </div>\n\n      <button\n        className=\"btn btn-primary\"\n        type=\"submit\"\n        disabled={loading || !content}\n      >\n        Post\n      </button>\n    </form>\n  );\n\n  return (\n    <div className=\"container p-5\">\n      {loading ? <h4 className=\"text-danger\">Loading</h4> : <h4>Create</h4>}\n\n      <FileUpload\n        values={values}\n        loading={loading}\n        setValues={setValues}\n        setLoading={setLoading}\n        singleUpload={true}\n      />\n\n      <div className=\"row\">\n        <div className=\"col\">{createForm()}</div>\n      </div>\n      <hr />\n      <div className=\"row p-5\">\n        { myData &&\n          myData.postsByUser.posts.map((post) => (\n            <div className=\"col-md-6 pt-5\" key={post._id}>\n              <PostCard post={post} onShow={handleShow} postModal={setPostModal} />\n            </div>\n          )) }\n      </div>\n\n      <PostDeleteModal show={show} onClose={handleClose} postModal={postModal} limit={limit} page={page} />\n    </div>\n  );\n};\n\nexport default Post;\n","import React from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { useParams } from \"react-router-dom\";\nimport UserCard from \"../components/UserCard\";\nimport { PUBLIC_PROFILE } from \"../graphql/queries\";\n\nconst SingleUser = () => {\n\n  let params = useParams();\n  const { loading, data } = useQuery(PUBLIC_PROFILE, {\n    variables: { username: params.username },\n  });\n\n  if (loading) return <p className=\"p-5\">Loading...</p>;\n\n  return (\n    <div className=\"container\">\n      <br />\n      <br />\n      <UserCard user={data.publicProfile} />\n    </div>\n  );\n};\n\nexport default SingleUser;\n","import React, { useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { toast } from \"react-toastify\";\nimport FileUpload from \"../FileUpload\";\n\nconst initialState = {\n    id: \"\",\n    content: \"\",\n    image: {\n        url: \"https://via.placeholder.com/200x200.png?text=Post\",\n        public_id: \"123\",\n    },\n};\n\nconst PostUpdateModal = ({ show, onClose, postModal, postUpdate }) => {\n    \n    const [loading, setLoading] = useState(false);\n\n    const [values, setValues] = useState(initialState);\n\n    const handleChange = (e) => {\n        e.preventDefault();\n        setValues({ ...values, [e.target.name]: e.target.value });\n    }\n\n    const { content } = values;\n\n    const handleSubmit = () => {\n        setLoading(true);\n        const id =  values.id;\n        delete values.id;\n        postUpdate({ variables: { id: id, input: values } });\n        setLoading(false);\n        onClose();\n        toast.success(\"Post updated\");\n    }\n\n    useEffect(() => {\n        if(postModal) {\n            const dataModal = {\n                id: postModal?._id,\n                content: postModal?.content,\n                image: {\n                    url: postModal?.image?.url,\n                    public_id: postModal?.image?.public_id,\n                },\n            }\n            setValues(dataModal);\n        }\n    }, [postModal])\n\n    const updateForm = () => (\n        <>\n          <div className=\"form-group\">\n            <textarea\n              value={content}\n              onChange={handleChange}\n              name=\"content\"\n              rows=\"5\"\n              className=\"md-textarea form-control\"\n              placeholder=\"Write something cool\"\n              maxLength=\"150\"\n              disabled={loading}\n            ></textarea>\n          </div>\n        </>\n      );\n\n    return (\n        <>\n            <Modal show={show} onHide={onClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>{loading ? <h4 className=\"text-danger\">Loading</h4> : <h4>Post Update</h4> }</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <FileUpload\n                        values={values}\n                        loading={loading}\n                        setValues={setValues}\n                        setLoading={setLoading}\n                        singleUpload={true}\n                    />\n                    { updateForm() }\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={onClose}>\n                        Close\n                    </Button>\n                    <Button variant=\"primary\" onClick={handleSubmit} disabled={loading || !content}>\n                        Confirm\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    )\n}\n\nexport default PostUpdateModal;","import React from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\n\nconst PostModalShow = ({ show, onClose, postModal }) => {\n\n    return (\n        <>\n            <Modal show={show} onHide={onClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Show Post</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <img \n                        src={postModal.image.url}\n                        key={postModal.image.public_id}\n                        alt={postModal.image.public_id}\n                        style={{ height: \"100px\" }}\n                        className=\"img-thumbnail mb-4\"\n                    />\n                    <p>Content</p>\n                    <p><small>{postModal.content}</small></p>\n                    <br/>\n                    <p>Posted By</p>\n                    <p><small>@{ postModal.postedBy.username } - ({ postModal.postedBy.email })</small></p>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={onClose}>\n                        Close\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    )\n}\n\nexport default PostModalShow;","import React, { useState, useEffect, useContext } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { POST_UPDATE, POST_DELETE } from \"../../graphql/mutations\";\nimport { POSTS_BY_USER, GET_ALL_POST, TOTAL_POST } from \"../../graphql/queries\";\nimport PostCard from \"../../components/PostCard\";\nimport PostDeleteModal from \"../../components/modals/PostDelete\";\nimport { useLocation } from \"react-router-dom\";\nimport PostUpdateModal from \"../../components/modals/PostUpdate\";\nimport { AuthContext } from \"../../context/authContext\";\nimport PostModalShow from \"../../components/modals/PostShow\";\n\nconst Posts = () => {\n\n    let emailUser = null;\n    const context = useContext(AuthContext);\n\n    if(context) {\n        if (context.state.user) {\n            const { email } = context.state.user;\n            emailUser = email;\n        }\n    }\n\n    const [show, setShow] = useState(false);\n    const [showDelete, setShowDelete] = useState(false);\n    const [showUpdate, setShowUpdate] = useState(false);\n    const [postModal, setPostModal] = useState('');\n\n    const handleShow = () => setShow(true);\n    const handleClose = () => setShow(false);\n    \n    const handleCloseDelete = () => setShowDelete(false);\n    const handleShowDelete = () => setShowDelete(true);\n\n    const handleShowUpdate = () => setShowUpdate(true);\n    const handleCloseUpdate = () => setShowUpdate(false);\n\n    const [loading, setLoading] = useState(false);\n    const [page, setPage] = useState(1);\n\n    const [limit, setLimit] = useState(6);\n    const [search, setSearch] = useState(\"\");\n    const [result, setResult] = useState(\"\");\n    const [postId, setPostId] = useState(\"\");\n\n    const { data } = useQuery(GET_ALL_POST, { variables: { limit, page, search: result } });\n    const { data: total } = useQuery(TOTAL_POST);\n\n    const [postUpdate] = useMutation(POST_UPDATE, {\n        // read query from cache / write query to cache\n        update: (cache, { data: { postUpdate } }) => {\n            // read Query from cache\n            const { allPosts } = cache.readQuery({\n                query: GET_ALL_POST,\n                variables: { limit, page, search: result }\n            });\n            console.log(\"allPosts\", allPosts)\n            // write Query to cache\n            cache.writeQuery({\n                query: GET_ALL_POST,\n                variables: { limit, page, search: result },\n                data: {\n                    allPosts: {\n                        __typename: \"PostInfo\",\n                        posts: allPosts.posts,\n                    },\n                    // postsByUser: [postCreate, ...postsByUser],\n                },\n            });\n        },\n        onError: (err) => console.log(err.graphqlQLError[0].message),\n    });\n\n    const [postDelete] = useMutation(POST_DELETE, {\n        // read query from cache / write query to cache\n        update: (cache, { data: { postDeleted } }) => {\n          // read Query from cache\n          const { allPosts } = cache.readQuery({\n            query: GET_ALL_POST,\n            variables: { limit, page, search: result }\n          });\n          // write Query to cache\n          cache.writeQuery({\n            query: GET_ALL_POST,\n            variables: { limit, page, search: result },\n            data: {\n              allPosts: {\n                __typename: \"PostInfo\",\n                posts: allPosts.posts.filter((post) => post._id !== postId)\n              }\n              // postsByUser: [postCreate, ...postsByUser],\n            },\n          });\n        },\n        onError: (err) => console.log(err.graphqlQLError[0].message),\n    });\n\n    // useLocation\n    const location = useLocation();\n\n    useEffect(() => {\n        console.log(\"cambiando resultado\");\n    }, [data]);\n\n    useEffect(() => {\n        if(location.pathname && location.state) {\n            setLoading(true);\n            setSearch(location.state.search);\n            setResult(location.state.search);\n            setLoading(false);\n        }\n     }, [location]);\n\n    const handleLimit = (e) => {\n        e.preventDefault();\n        console.log(e.target.value);\n        setPage(1);\n        setLimit(parseInt(e.target.value));\n    }\n\n    const handleSearch = (e) => {\n        setPage(1);\n        setSearch(e.target.value);\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        console.log(\"entro al handleSubmit\");\n        setResult(search);\n    }\n\n    return (\n        <div className=\"container p-5\">\n            { (loading && !total) ? <h4>Loading....</h4> : <h1 className=\"text-center\">All Posts <h6>(Total en la base de datos: { JSON.stringify(total.totalPosts) })</h6></h1> }\n            <div className=\"row\">\n                <div className=\"col-12\">\n                    <form className=\"form-inline mt-5 float-right\" onSubmit={handleSubmit}>\n                        <div className=\"form-group my-2 my-lg-0 mr-3\">\n                            <input\n                                className=\"form-control mr-sm-2\"\n                                type=\"search\"\n                                name=\"search\"\n                                onChange={handleSearch}\n                                value={search}\n                                placeholder=\"\"\n                                aria-label=\"Search\"\n                            />\n                            <button\n                                className=\"btn btn-outline-success my-2 my-sm-0\"\n                                type=\"submit\"\n                            >\n                                <span>Search</span>\n                                {/* <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" className=\"bi bi-search\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z\"/>\n                                </svg> */}\n                            </button>\n                        </div>\n                        <div className=\"form-group\">\n                            <select className=\"custom-select\" onChange={handleLimit}>\n                                <option value=\"\">N por pgina</option>\n                                <option value=\"3\">3</option>\n                                <option value=\"6\">6</option>\n                                <option value=\"9\">9</option>\n                                <option value=\"12\">12</option>\n                            </select>\n                        </div>\n                    </form>          \n                </div>\n            </div>\n            \n            <div className=\"row\">\n                { data &&  \n                    data.allPosts.posts.map((post) => (\n                        <div className=\"col-md-4 pt-5\" key={post._id}>\n                            <PostCard \n                                post={post}  \n                                onShow={handleShow}\n                                onShowDelete={handleShowDelete} \n                                onShowUpdate={handleShowUpdate} \n                                postModal={setPostModal} \n                                email={emailUser} />\n                        </div>\n                    ))\n                }\n            </div>\n            <div className=\"row\">\n                <div className=\"col-12 text-center pt-5\">\n                    { data && (page <= data.allPosts.pages && page > 1) && (\n                            <button onClick={() => setPage(pageCount => pageCount - 1)} className=\"btn btn-primary float-left\" type=\"button\">Prev Page</button>       \n                        )\n                    }\n                \n                    { data && (page != data.allPosts.pages) && (\n                        <button onClick={() => setPage(pageCount => pageCount + 1)} className=\"btn btn-primary float-right\" type=\"button\">Next Page</button>     \n                    )  \n                    } \n                </div>\n            </div>\n            { show && (\n                <PostModalShow show={show} onClose={handleClose} postModal={postModal} />\n            ) }\n            { showDelete && (\n                <PostDeleteModal show={showDelete} onClose={handleCloseDelete} postModal={postModal} postDelete={postDelete} setPostId={setPostId} />\n            ) }\n            { showUpdate && (\n                <PostUpdateModal show={showUpdate} onClose={handleCloseUpdate} postModal={postModal} postUpdate={postUpdate} />\n            ) }\n        </div>\n    );\n}\n\nexport default Posts; ","import React, { useState, useMemo } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { useParams } from \"react-router-dom\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { POST_SHOW } from \"../../graphql/queries\";\nimport { POST_UPDATE } from \"../../graphql/mutations\";\n\nconst initialState = {\n    id: \"\",\n    content: \"\",\n    image_url: \"\",\n}\n\nexport const SinglePost = () => {\n    const { idPost } = useParams();\n    const { loading, data } = useQuery(POST_SHOW, { variables: { id: idPost } });\n    \n    const [values, setValues] = useState(initialState);\n    const [loadingForm, setLoading] = useState(false);\n    const { id, content } = values;\n\n    useMemo(() => {\n        if (data) {\n          console.log(data.postShow);\n          setValues({\n            ...values,\n            id: data.postShow._id,\n            content: data.postShow.content,\n            image_url: data.postShow.image.url\n          });\n        }\n    }, [data]);\n\n    //useMutation\n    const [postUpdate] = useMutation(POST_UPDATE, {\n        update: ({ data: dataPost }) => {\n          console.log(\"POST UPDATE MUTATION\", dataPost);\n          toast.success(\"Post updated\");\n        },\n      });\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        setLoading(true);\n        postUpdate({ variables: { id: values.id, input: { content: values.content } } });\n        setLoading(false);\n    }\n\n    const handleChange = (e) => {\n        setValues({ ...values, [e.target.name]: e.target.value });\n    }\n\n    console.log(idPost);\n    return (\n        <div className=\"container p-5\">\n            {  loading ? <h3>Loading...</h3> :\n                <div className=\"row\">   \n                    <div className=\"col-12\">    \n                        <h3>Actualizar Post</h3>\n                    </div> \n                    <div className=\"col-12\">\n                        <form onSubmit={handleSubmit}>\n                            <div className=\"form-group\">\n                                <input type=\"hidden\" name=\"id\" value={id} />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"content\">Description</label>\n                                <textarea onChange={handleChange} className=\"form-control\" id=\"content\" name=\"content\" rows=\"5\" value={content}>\n                                </textarea>\n                            </div>\n                            <div className=\"form-group\">\n                                <button className=\"btn btn-primary\" type=\"submit\">Guardar Cambios</button>\n                            </div>\n                        </form>\n                    </div>\n                </div> }\n        </div>\n    )\n}\n\nexport default SinglePost;\n","import React, { useContext } from \"react\";\nimport ApolloClient from \"apollo-boost\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport { AuthContext } from \"./context/authContext\";\nimport { ToastContainer } from \"react-toastify\";\nimport Nav from \"./components/Nav\";\nimport Home from \"./pages/Home\";\nimport Users from \"./pages/Users\";\nimport Register from \"./pages/auth/Register\";\nimport PasswordUpdate from \"./pages/auth/PasswordUpdate\";\nimport PasswordForgot from \"./pages/auth/PasswordForgot\";\nimport Profile from \"./pages/auth/Profile\";\nimport Login from \"./pages/auth/Login\";\nimport CompleteRegistration from \"./pages/auth/CompleteRegistration\";\nimport PrivateRoute from \"./components/PrivateRoute\";\nimport PublicRoute from \"./components/PublicRoute\";\nimport Post from \"./pages/post/Post\";\nimport SingleUser from \"./pages/SingleUser\";\nimport Posts from \"./pages/post/Posts\";\nimport SinglePost from \"./pages/post/SinglePost\";\n\nconst App = () => {\n  const { state } = useContext(AuthContext);\n  const { user } = state;\n\n  const client = new ApolloClient({\n    uri: process.env.REACT_APP_GRAPHQL_ENDPOINT,\n    request: (operation) => {\n      operation.setContext({\n        headers: {\n          authtoken: user ? user.token : \"\",\n        },\n      });\n    },\n  });\n\n  return (\n    <ApolloProvider client={client}>\n      <Nav />\n      <ToastContainer />\n      <Switch>\n        <Route exact path=\"/\" component={Posts} />\n        <Route exact path=\"/users\" component={Users} />\n        <Route exact path=\"/posts\" component={Posts} />\n        <PublicRoute exact path=\"/register\" component={Register} />\n        <PublicRoute exact path=\"/login\" component={Login} />\n        <Route\n          exact\n          path=\"/complete-registration\"\n          component={CompleteRegistration}\n        />\n        <Route exact path=\"/password/forgot\" component={PasswordForgot} />\n        <PrivateRoute\n          exact\n          path=\"/password/update\"\n          component={PasswordUpdate}\n        />\n        <PrivateRoute exact path=\"/profile\" component={Profile} />\n        <PrivateRoute exact path=\"/post/create\" component={Post} />\n        <PrivateRoute exact path=\"/post/:idPost\" component={SinglePost} />\n        <Route exact path=\"/user/:username\" component={SingleUser} />\n      </Switch>\n    </ApolloProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { AuthProvider } from \"./context/authContext\";\nimport { HashRouter, BrowserRouter } from \"react-router-dom\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}